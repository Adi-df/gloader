"use strict";const GLoader={gljs_version:"0.1.26"};GLoader.create=function(e){if(!e instanceof HTMLCanvasElement)return void console.error("Unable to initialize the canvas. The passed element isn't an instance of HTMLCanvasElement.");const r=e.getContext("webgl");if(null===r)return void alert("Unable to initialize WebGL. Your browser or machine may not support it.");let t,n=null,a=[];function o(e,r){0==e&&alert(r)}function i(e,r,n){return new r(t.buffer,e,n)}function l(e,r){let n=new Uint8Array(t.buffer,e),a=0,o=a+r,i="";for(;!(a>=o);){let e=n[a++];if(!e)return i;if(!(128&e)){i+=String.fromCharCode(e);continue}let r=63&n[a++];if(192==(224&e)){i+=String.fromCharCode((31&e)<<6|r);continue}let t=63&n[a++];if(224==(240&e)?e=(15&e)<<12|r<<6|t:(240!=(248&e)&&console.warn(`Invalid UTF - 8 leading byte 0x${e.toString(16)} encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!`),e=(7&e)<<18|r<<12|t<<6|63&n[a++]),e<65536)i+=String.fromCharCode(e);else{let r=e-65536;i+=String.fromCharCode(55296|r>>10,56320|1023&r)}}return i}e.focus(),e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock||(()=>{}),document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||(()=>{}),function(e){let r=e.getExtension("OES_vertex_array_object");r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.deleteVertexArray=e=>r.deleteVertexArrayOES(e),e.bindVertexArray=e=>r.bindVertexArrayOES(e),e.isVertexArray=e=>r.isVertexArrayOES(e)):alert("Unable to get OES_vertex_array_object extension")}(r),function(e){let r=e.getExtension("ANGLE_instanced_arrays");r&&(e.vertexAttribDivisor=(e,t)=>r.vertexAttribDivisorANGLE(e,t),e.drawArraysInstanced=(e,t,n,a)=>r.drawArraysInstancedANGLE(e,t,n,a),e.drawElementsInstanced=(e,t,n,a,o)=>r.drawElementsInstancedANGLE(e,t,n,a,o))}(r),function(e){let r=e.getExtension("EXT_disjoint_timer_query");r&&(e.createQuery=()=>r.createQueryEXT(),e.beginQuery=(e,t)=>r.beginQueryEXT(e,t),e.endQuery=e=>r.endQueryEXT(e),e.deleteQuery=e=>r.deleteQueryEXT(e),e.getQueryObject=(e,t)=>r.getQueryObjectEXT(e,t))}(r),null==r.getExtension("WEBGL_depth_texture")&&alert("Cant initialize WEBGL_depth_texture extension");let s,u={loaded_files:[],unique_id:0},c={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],timerQueries:[],contexts:{},programInfos:{},getNewId(e){let r=c.counter++;for(let t=e.length;t<r;t++)e[t]=null;return r},validateGLObjectID(e,r,t,n){0!=r&&(null===e[r]?console.error(`${t} called with an already deleted ${n} ID ${r}!`):e[r]||console.error(`${t} called with an invalid ${n} ID ${r}!`))},getSource(e,r,t,n){let a="";for(let e=0;e<r;++e){let r=0==n?void 0:i(n+4*e,Uint32Array,1)[0];a+=l(i(t+4*e,Uint32Array,1)[0],r)}return a},populateUniformTable(e){c.validateGLObjectID(c.programs,e,"populateUniformTable","program");let t=c.programs[e],n=c.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},a=n.uniforms,o=r.getProgramParameter(t,35718);for(let e=0;e<o;++e){let o=r.getActiveUniform(t,e),i=o.name;n.maxUniformLength=Math.max(n.maxUniformLength,i.length+1),"]"==i.slice(-1)&&(i=i.slice(0,i.lastIndexOf("[")));let l=r.getUniformLocation(t,i);if(l){let e=c.getNewId(c.uniforms);a[i]=[o.size,e],c.uniforms[e]=l;for(let n=1;n<o.size;++n){let a=i+"["+n+"]";l=r.getUniformLocation(t,a),e=c.getNewId(c.uniforms),c.uniforms[e]=l}}}}};function f(e,t,n,a,o){for(let l=0;l<e;l++){let e=r[n](),s=e&&c.getNewId(a);e?(e.name=s,a[s]=e):(console.error("GL_INVALID_OPERATION"),c.recordError(1282),alert(`GL_INVALID_OPERATION in ${o}: GLctx. ${n} returned null - most likely GL context is lost!`)),i(t+4*l,Int32Array,1)[0]=s}}function d(e,r){let t=b(),n=e.clientWidth*t,a=e.clientHeight*t;e.width==n&&e.height==a||(e.width=n,e.height=a,null!=r&&r(Math.floor(n),Math.floor(a)))}function g(){s.frame(),window.requestAnimationFrame(g)}function m(e){switch(e){case 0:return 0;case 1:return 2;case 2:return 1;default:return e}}function p(e){switch(e){case"Space":return 32;case"Quote":return 39;case"Comma":return 44;case"Minus":return 45;case"Period":return 46;case"Slash":return 47;case"Digit0":return 48;case"Digit1":return 49;case"Digit2":return 50;case"Digit3":return 51;case"Digit4":return 52;case"Digit5":return 53;case"Digit6":return 54;case"Digit7":return 55;case"Digit8":return 56;case"Digit9":return 57;case"Semicolon":return 59;case"Equal":return 61;case"KeyA":return 65;case"KeyB":return 66;case"KeyC":return 67;case"KeyD":return 68;case"KeyE":return 69;case"KeyF":return 70;case"KeyG":return 71;case"KeyH":return 72;case"KeyI":return 73;case"KeyJ":return 74;case"KeyK":return 75;case"KeyL":return 76;case"KeyM":return 77;case"KeyN":return 78;case"KeyO":return 79;case"KeyP":return 80;case"KeyQ":return 81;case"KeyR":return 82;case"KeyS":return 83;case"KeyT":return 84;case"KeyU":return 85;case"KeyV":return 86;case"KeyW":return 87;case"KeyX":return 88;case"KeyY":return 89;case"KeyZ":return 90;case"BracketLeft":return 91;case"Backslash":return 92;case"BracketRight":return 93;case"Backquote":return 96;case"Escape":return 256;case"Enter":return 257;case"Tab":return 258;case"Backspace":return 259;case"Insert":return 260;case"Delete":return 261;case"ArrowRight":return 262;case"ArrowLeft":return 263;case"ArrowDown":return 264;case"ArrowUp":return 265;case"PageUp":return 266;case"PageDown":return 267;case"Home":return 268;case"End":return 269;case"CapsLock":return 280;case"ScrollLock":return 281;case"NumLock":return 282;case"PrintScreen":return 283;case"Pause":return 284;case"F1":return 290;case"F2":return 291;case"F3":return 292;case"F4":return 293;case"F5":return 294;case"F6":return 295;case"F7":return 296;case"F8":return 297;case"F9":return 298;case"F10":return 299;case"F11":return 300;case"F12":return 301;case"F13":return 302;case"F14":return 303;case"F15":return 304;case"F16":return 305;case"F17":return 306;case"F18":return 307;case"F19":return 308;case"F20":return 309;case"F21":return 310;case"F22":return 311;case"F23":return 312;case"F24":return 313;case"Numpad0":return 320;case"Numpad1":return 321;case"Numpad2":return 322;case"Numpad3":return 323;case"Numpad4":return 324;case"Numpad5":return 325;case"Numpad6":return 326;case"Numpad7":return 327;case"Numpad8":return 328;case"Numpad9":return 329;case"NumpadDecimal":return 330;case"NumpadDivide":return 331;case"NumpadMultiply":return 332;case"NumpadSubtract":return 333;case"NumpadAdd":return 334;case"NumpadEnter":return 335;case"NumpadEqual":return 336;case"ShiftLeft":return 340;case"ControlLeft":return 341;case"AltLeft":return 342;case"OSLeft":return 343;case"ShiftRight":return 344;case"ControlRight":return 345;case"AltRight":return 346;case"OSRight":return 347;case"ContextMenu":return 348}console.log("Unsupported keyboard key: ",e)}function b(){return 1}function h(e,t,n){return e==r.ALPHA?t*n:e==r.RGB?t*n*3:e==r.RGBA?t*n*4:t*n*3}function v(r,t){let n=e.getBoundingClientRect();return{x:1*(r-n.left),y:1*(t-n.top)}}let y=!1,_={env:{console_debug(e){console.debug(l(e))},console_log(e){console.log(l(e))},console_info(e){console.info(l(e))},console_warn(e){console.warn(l(e))},console_error(e){console.error(l(e))},set_emscripten_shader_hack(e){y=e},sapp_set_clipboard(e,r){n=l(e,r)},dpi_scale:b,rand:()=>Math.floor(2147483647*Math.random()),now:()=>Date.now()/1e3,canvas_width:()=>Math.floor(e.width),canvas_height:()=>Math.floor(e.height),glClearDepthf(e){r.clearDepth(e)},glClearColor(e,t,n,a){r.clearColor(e,t,n,a)},glClearStencil(e){r.clearColorStencil(e)},glColorMask(e,t,n,a){r.colorMask(e,t,n,a)},glScissor(e,t,n,a){r.scissor(e,t,n,a)},glClear(e){r.clear(e)},glGenTextures(e,r){f(e,r,"createTexture",c.textures,"glGenTextures")},glActiveTexture(e){r.activeTexture(e)},glBindTexture(e,t){c.validateGLObjectID(c.textures,t,"glBindTexture","texture"),r.bindTexture(e,c.textures[t])},glTexImage2D(e,t,n,a,o,l,s,u,c){r.texImage2D(e,t,n,a,o,l,s,u,c?i(c,Uint8Array,h(n,a,o)):null)},glTexSubImage2D(e,t,n,a,o,l,s,u,c){r.texSubImage2D(e,t,n,a,o,l,s,u,c?i(c,Uint8Array,h(s,o,l)):null)},glReadPixels(e,t,n,a,o,l,s){let u=i(s,Uint8Array,h(o,n,a));r.readPixels(e,t,n,a,o,l,u)},glTexParameteri(e,t,n){r.texParameteri(e,t,n)},glUniform1fv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform1fv","location"),o(0==(3&n),"Pointer to float data passed to glUniform1fv must be aligned to four bytes!");let a=i(n,Float32Array,1*t);r.uniform1fv(c.uniforms[e],a)},glUniform2fv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform2fv","location"),o(0==(3&n),"Pointer to float data passed to glUniform2fv must be aligned to four bytes!");let a=i(n,Float32Array,2*t);r.uniform2fv(c.uniforms[e],a)},glUniform3fv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform3fv","location"),o(0==(3&n),"Pointer to float data passed to glUniform3fv must be aligned to four bytes!");let a=i(n,Float32Array,3*t);r.uniform3fv(c.uniforms[e],a)},glUniform4fv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform4fv","location"),o(0==(3&n),"Pointer to float data passed to glUniform4fv must be aligned to four bytes!");let a=i(n,Float32Array,4*t);r.uniform4fv(c.uniforms[e],a)},glUniform1iv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform1fv","location"),o(0==(3&n),"Pointer to i32 data passed to glUniform1iv must be aligned to four bytes!");let a=i(n,Int32Array,1*t);r.uniform1iv(c.uniforms[e],a)},glUniform2iv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform2fv","location"),o(0==(3&n),"Pointer to i32 data passed to glUniform2iv must be aligned to four bytes!");let a=i(n,Int32Array,2*t);r.uniform2iv(c.uniforms[e],a)},glUniform3iv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform3fv","location"),o(0==(3&n),"Pointer to i32 data passed to glUniform3iv must be aligned to four bytes!");let a=i(n,Int32Array,3*t);r.uniform3iv(c.uniforms[e],a)},glUniform4iv(e,t,n){c.validateGLObjectID(c.uniforms,e,"glUniform4fv","location"),o(0==(3&n),"Pointer to i32 data passed to glUniform4iv must be aligned to four bytes!");let a=i(n,Int32Array,4*t);r.uniform4iv(c.uniforms[e],a)},glBlendFunc(e,t){r.blendFunc(e,t)},glBlendEquationSeparate(e,t){r.blendEquationSeparate(e,t)},glDisable(e){r.disable(e)},glDrawElements(e,t,n,a){r.drawElements(e,t,n,a)},glGetIntegerv(e,t){!function(e,t,n){if(!t)return console.error(`GL_INVALID_VALUE in glGet${n}v(name=${e}: Function called with null out pointer!`),void c.recordError(1281);let a;switch(e){case 36346:a=1;break;case 36344:return void("EM_FUNC_SIG_PARAM_I"!=n&&"EM_FUNC_SIG_PARAM_I64"!=n&&(c.recordError(1280),err(`GL_INVALID_ENUM in glGet${n}v(GL_SHADER_BINARY_FORMATS): Invalid parameter type!`)));case 34814:case 36345:a=0;break;case 34466:let e=r.getParameter(34467);a=e?e.length:0;break;case 33309:case 33307:case 33308:o(!1,"unimplemented")}if(void 0===a){let t=r.getParameter(e);switch(typeof t){case"number":a=t;break;case"boolean":a=t?1:0;break;case"string":return c.recordError(1280),void console.error(`GL_INVALID_ENUM in glGet${n}v(${e}) on a name which returns a string!`);case"object":if(null===t)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:a=0;break;default:return c.recordError(1280),void console.error(`GL_INVALID_ENUM in glGet${n}v(${e}) and it returns null!`)}else{if(t instanceof Float32Array||t instanceof Uint32Array||t instanceof Int32Array||t instanceof Array){for(let e=0;e<t.length;++e)o(!1,"unimplemented");return}try{a=0|t.name}catch(r){return c.recordError(1280),void console.error(`GL_INVALID_ENUM in glGet${n}v: Unknown object returned from WebGL getParameter(${e})! (error: ${r})`)}}break;default:return c.recordError(1280),void console.error(`GL_INVALID_ENUM in glGet${n}v: Native code calling glGet${n}v(${e}) and it returns ${t} of type ${typeof t}!`)}}switch(n){case"EM_FUNC_SIG_PARAM_I64":i(t,Int32Array,1)[0]=a;case"EM_FUNC_SIG_PARAM_I":i(t,Int32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_F":i(t,Float32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_B":i(t,Int8Array,1)[0]=a?1:0;break;default:throw`internal glGet error, bad type: ${n}`}}(e,t,"EM_FUNC_SIG_PARAM_I")},glUniform1f(e,t){c.validateGLObjectID(c.uniforms,e,"glUniform1f","location"),r.uniform1f(c.uniforms[e],t)},glUniform1i(e,t){c.validateGLObjectID(c.uniforms,e,"glUniform1i","location"),r.uniform1i(c.uniforms[e],t)},glGetAttribLocation:(e,t)=>r.getAttribLocation(c.programs[e],l(t)),glEnableVertexAttribArray(e){r.enableVertexAttribArray(e)},glDisableVertexAttribArray(e){r.disableVertexAttribArray(e)},glVertexAttribPointer(e,t,n,a,o,i){r.vertexAttribPointer(e,t,n,!!a,o,i)},glGetUniformLocation(e,r){c.validateGLObjectID(c.programs,e,"glGetUniformLocation","program");let t=0;if("]"==(r=l(r))[r.length-1]){let e=r.lastIndexOf("[");t="]"!=r[e+1]?parseInt(r.slice(e+1)):0,r=r.slice(0,e)}let n=c.programInfos[e]&&c.programInfos[e].uniforms[r];return n&&t>=0&&t<n[0]?n[1]+t:-1},glUniformMatrix4fv(e,t,n,a){c.validateGLObjectID(c.uniforms,e,"glUniformMatrix4fv","location"),o(0==(3&a),"Pointer to float data passed to glUniformMatrix4fv must be aligned to four bytes!");let l=i(a,Float32Array,16);r.uniformMatrix4fv(c.uniforms[e],!!n,l)},glUseProgram(e){c.validateGLObjectID(c.programs,e,"glUseProgram","program"),r.useProgram(c.programs[e])},glGenVertexArrays(e,r){f(e,r,"createVertexArray",c.vaos,"glGenVertexArrays")},glGenFramebuffers(e,r){f(e,r,"createFramebuffer",c.framebuffers,"glGenFramebuffers")},glBindVertexArray(e){r.bindVertexArray(c.vaos[e])},glBindFramebuffer(e,t){c.validateGLObjectID(c.framebuffers,t,"glBindFramebuffer","framebuffer"),r.bindFramebuffer(e,c.framebuffers[t])},glGenBuffers(e,r){f(e,r,"createBuffer",c.buffers,"glGenBuffers")},glBindBuffer(e,t){c.validateGLObjectID(c.buffers,t,"glBindBuffer","buffer"),r.bindBuffer(e,c.buffers[t])},glBufferData(e,t,n,a){r.bufferData(e,n?i(n,Uint8Array,t):t,a)},glBufferSubData(e,t,n,a){r.bufferSubData(e,t,a?i(a,Uint8Array,n):n)},glEnable(e){r.enable(e)},glFlush(){r.flush()},glFinish(){r.finish()},glDepthFunc(e){r.depthFunc(e)},glBlendFuncSeparate(e,t,n,a){r.blendFuncSeparate(e,t,n,a)},glViewport(e,t,n,a){r.viewport(e,t,n,a)},glDrawArrays(e,t,n){r.drawArrays(e,t,n)},glCreateProgram(){let e=c.getNewId(c.programs),t=r.createProgram();return t.name=e,c.programs[e]=t,e},glAttachShader(e,t){c.validateGLObjectID(c.programs,e,"glAttachShader","program"),c.validateGLObjectID(c.shaders,t,"glAttachShader","shader"),r.attachShader(c.programs[e],c.shaders[t])},glLinkProgram(e){c.validateGLObjectID(c.programs,e,"glLinkProgram","program"),r.linkProgram(c.programs[e]),c.populateUniformTable(e)},glPixelStorei(e,t){r.pixelStorei(e,t)},glFramebufferTexture2D(e,t,n,a,o){c.validateGLObjectID(c.textures,a,"glFramebufferTexture2D","texture"),r.framebufferTexture2D(e,t,n,c.textures[a],o)},glGetProgramiv(e,t,n){if(o(n),c.validateGLObjectID(c.programs,e,"glGetProgramiv","program"),e>=c.counter)return void console.error("GL_INVALID_VALUE in glGetProgramiv");if(c.programInfos[e])if(35716==t){let t=r.getProgramInfoLog(c.programs[e]);o(null!==t),i(n,Int32Array,1)[0]=t.length+1}else{if(35719==t)return void console.error("unsupported operation");if(35722==t)return void console.error("unsupported operation");if(35381==t)return void console.error("unsupported operation");i(n,Int32Array,1)[0]=r.getProgramParameter(c.programs[e],t)}else console.error(`GL_INVALID_OPERATION in glGetProgramiv(program=${e}, pname=${t}, p=0x${n.toString(16)}): The specified GL object name does not refer to a program object!`)},glCreateShader(e){let t=c.getNewId(c.shaders);return c.shaders[t]=r.createShader(e),t},glStencilFuncSeparate(e,t,n,a){r.stencilFuncSeparate(e,t,n,a)},glStencilMaskSeparate(e,t){r.stencilMaskSeparate(e,t)},glStencilOpSeparate(e,t,n,a){r.stencilOpSeparate(e,t,n,a)},glFrontFace(e){r.frontFace(e)},glCullFace(e){r.cullFace(e)},glCopyTexImage2D(e,t,n,a,o,i,l,s){r.copyTexImage2D(e,t,n,a,o,i,l,s)},glShaderSource(e,t,n,a){c.validateGLObjectID(c.shaders,e,"glShaderSource","shader");let o=c.getSource(e,t,n,a);if(y){o=o.replace(/#extension GL_OES_standard_derivatives : enable/g,""),o=o.replace(/#extension GL_EXT_shader_texture_lod : enable/g,"");let e="";-1!=o.indexOf("gl_FragColor")&&(e+="out mediump vec4 GL_FragColor;\n",o=o.replace(/gl_FragColor/g,"GL_FragColor")),-1!=o.indexOf("attribute")?(o=o.replace(/attribute/g,"in"),o=o.replace(/varying/g,"out")):o=o.replace(/varying/g,"in"),o=o.replace(/textureCubeLodEXT/g,"textureCubeLod"),o=o.replace(/texture2DLodEXT/g,"texture2DLod"),o=o.replace(/texture2DProjLodEXT/g,"texture2DProjLod"),o=o.replace(/texture2DGradEXT/g,"texture2DGrad"),o=o.replace(/texture2DProjGradEXT/g,"texture2DProjGrad"),o=o.replace(/textureCubeGradEXT/g,"textureCubeGrad"),o=o.replace(/textureCube/g,"texture"),o=o.replace(/texture1D/g,"texture"),o=o.replace(/texture2D/g,"texture"),o=o.replace(/texture3D/g,"texture"),o=o.replace(/#version 100/g,"#version 300 es\n"+e)}r.shaderSource(c.shaders[e],o)},glGetProgramInfoLog(e,t,n,a){c.validateGLObjectID(c.programs,e,"glGetProgramInfoLog","program");let l=r.getProgramInfoLog(c.programs[e]);o(null!==l);let s=i(a,Uint8Array,t);for(let e=0;e<t;e++)s[e]=l.charCodeAt(e)},glCompileShader(e,t,n,a){c.validateGLObjectID(c.shaders,e,"glCompileShader","shader"),r.compileShader(c.shaders[e])},glGetShaderiv(e,t,n){if(o(n),c.validateGLObjectID(c.shaders,e,"glGetShaderiv","shader"),35716==t){let t=r.getShaderInfoLog(c.shaders[e]);o(null!==t),i(n,Int32Array,1)[0]=t.length+1}else if(35720==t){let t=r.getShaderSource(c.shaders[e]),a=null===t||0==t.length?0:t.length+1;i(n,Int32Array,1)[0]=a}else i(n,Int32Array,1)[0]=r.getShaderParameter(c.shaders[e],t)},glGetShaderInfoLog(e,t,n,a){c.validateGLObjectID(c.shaders,e,"glGetShaderInfoLog","shader");let l=r.getShaderInfoLog(c.shaders[e]);o(null!==l);let s=i(a,Uint8Array,t);for(let e=0;e<t;e++)s[e]=l.charCodeAt(e)},glVertexAttribDivisor(e,t){r.vertexAttribDivisor(e,t)},glDrawArraysInstanced(e,t,n,a){r.drawArraysInstanced(e,t,n,a)},glDrawElementsInstanced(e,t,n,a,o){r.drawElementsInstanced(e,t,n,a,o)},glDeleteShader(e){r.deleteShader(e)},glDeleteBuffers(e,t){for(let n=0;n<e;n++){let e=i(t+4*n,Uint32Array,1)[0],a=c.buffers[e];a&&(r.deleteBuffer(a),a.name=0,c.buffers[e]=null)}},glDeleteFramebuffers(e,t){for(let n=0;n<e;n++){let e=i(t+4*n,Uint32Array,1)[0],a=c.framebuffers[e];a&&(r.deleteFramebuffer(a),a.name=0,c.framebuffers[e]=null)}},glDeleteTextures(e,t){for(let n=0;n<e;n++){let e=i(t+4*n,Uint32Array,1)[0],a=c.textures[e];a&&(r.deleteTexture(a),a.name=0,c.textures[e]=null)}},glGenQueries(e,r){f(e,r,"createQuery",c.timerQueries,"glGenQueries")},glDeleteQueries(e,t){for(let t=0;t<e;t++){let e=i(textures+4*t,Uint32Array,1)[0],n=c.timerQueries[e];n&&(r.deleteQuery(n),n.name=0,c.timerQueries[e]=null)}},glBeginQuery(e,t){c.validateGLObjectID(c.timerQueries,t,"glBeginQuery","id"),r.beginQuery(e,c.timerQueries[t])},glEndQuery(e){r.endQuery(e)},glGetQueryObjectiv(e,t,n){c.validateGLObjectID(c.timerQueries,e,"glGetQueryObjectiv","id");let a=r.getQueryObject(c.timerQueries[e],t);i(n,Uint32Array,1)[0]=a},glGetQueryObjectui64v(e,t,n){c.validateGLObjectID(c.timerQueries,e,"glGetQueryObjectui64v","id");let a=r.getQueryObject(c.timerQueries[e],t),o=i(n,Uint32Array,2);o[0]=a,o[1]=(a-o[0])/4294967296},setup_canvas_size(r){window.high_dpi=r,d(e)},run_animation_loop(r){e.onmousemove=function(e){let r=v(e.clientX,e.clientY),t=r.x,n=r.y;s.mouse_move(Math.floor(t),Math.floor(n)),0==e.movementX&&0==e.movementY||s.raw_mouse_move(Math.floor(e.movementX),Math.floor(e.movementY))},e.onmousedown=function(e){let r=v(e.clientX,e.clientY),t=r.x,n=r.y,a=m(e.button);s.mouse_down(t,n,a)},e.addEventListener("wheel",(function(e){e.preventDefault(),s.mouse_wheel(-e.deltaX,-e.deltaY)})),e.onmouseup=function(e){let r=v(e.clientX,e.clientY),t=r.x,n=r.y,a=m(e.button);s.mouse_up(t,n,a)},e.onkeydown=function(e){let r=p(e.code);switch(r){case 32:case 262:case 263:case 264:case 265:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 259:case 258:case 39:case 47:e.preventDefault()}let t=0;e.ctrlKey&&(t|=2),e.shiftKey&&(t|=1),e.altKey&&(t|=4),s.key_down(r,t,e.repeat),32!=r&&39!=r&&47!=r||s.key_press(r)},e.onkeyup=function(e){let r=p(e.code),t=0;e.ctrlKey&&(t|=2),e.shiftKey&&(t|=1),e.altKey&&(t|=4),s.key_up(r,t)},e.onkeypress=function(e){0==(261==p(e.code)||e.ctrlKey)&&s.key_press(e.charCode)},e.addEventListener("touchstart",(function(e){e.preventDefault();for(const r of e.changedTouches)s.touch(10,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),e.addEventListener("touchend",(function(e){e.preventDefault();for(const r of e.changedTouches)s.touch(12,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),e.addEventListener("touchcancel",(function(e){e.preventDefault();for(const r of e.changedTouches)s.touch(SAPP_EVENTTYPE_TOUCHES_CANCELED,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),e.addEventListener("touchmove",(function(e){e.preventDefault();for(const r of e.changedTouches)s.touch(11,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),window.onresize=function(){d(e,s.resize)},window.addEventListener("copy",(e=>{null!=n&&(e.clipboardData.setData("text/plain",n),e.preventDefault())})),window.addEventListener("cut",(e=>{null!=n&&(e.clipboardData.setData("text/plain",n),e.preventDefault())})),window.addEventListener("paste",(e=>{e.stopPropagation(),e.preventDefault();let r=(e.clipboardData||window.clipboardData).getData("Text");if(null!=r&&null!=r&&0!=r.length){let e=(new TextEncoder).encode(r).length,n=s.allocate_vec_u8(e);!function(e,r,t,n){let a=t,o=t+n;for(let n=0;n<e.length;++n){let a=e.charCodeAt(n);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127){if(t>=o)break;r[t++]=a}else if(a<=2047){if(t+1>=o)break;r[t++]=192|a>>6,r[t++]=128|63&a}else if(a<=65535){if(t+2>=o)break;r[t++]=224|a>>12,r[t++]=128|a>>6&63,r[t++]=128|63&a}else{if(t+3>=o)break;a>=2097152&&console.warn(`Invalid Unicode code point 0x${a.toString(16)} encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF).`),r[t++]=240|a>>18,r[t++]=128|a>>12&63,r[t++]=128|a>>6&63,r[t++]=128|63&a}}}(r,new Uint8Array(t.buffer,n,e),0,e),s.on_clipboard_paste(n,e)}})),window.requestAnimationFrame(g)},fs_load_file(e,r){let t=l(e,r),n=u.unique_id;u.unique_id+=1;let a=new XMLHttpRequest;return a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(e){if(200==this.status){let e=new Uint8Array(this.response);u.loaded_files[n]=e,s.file_loaded(n)}},a.onerror=function(e){u.loaded_files[n]=null,s.file_loaded(n)},a.send(),n},fs_get_buffer_size:e=>null==u.loaded_files[e]?-1:u.loaded_files[e].length,fs_take_buffer(e,r,n){let a=u.loaded_files[e];console.assert(a.length<=n);let o=new Uint8Array(t.buffer,r,n);for(let e=0;e<a.length;e++)o[e]=a[e];delete u.loaded_files[e]},sapp_set_cursor_grab(r){r?e.requestPointerLock():document.exitPointerLock()},sapp_set_cursor(r,t){e.style.cursor=l(r,t)},sapp_is_fullscreen(){let r=document.fullscreenElement;return null!=r&&r.id==e.id},sapp_set_fullscreen(r){r?e.requestFullscreen():document.exitFullscreen()},sapp_set_window_size(r,t){e.width=r,e.height=t,d(e,s.resize)}}};function A(e){return`${e>>24&255}.${e>>16&255}.${65535&e}`}function x(e){if(null!=e)for(let r=0;r<e.length;r++)if(null!=e[r].on_init&&null!=e[r].on_init&&e[r].on_init(),null==e[r].name||null==e[r].name||null==e[r].version||null==e[r].version)console.warn("Some of the registred plugins do not have name or version"),console.warn("Probably old version of the plugin used");else{let t=`${e[r].name}_crate_version`;if(null==s[t])console.log(`Plugin ${e[r].name} is present in JS bundle, but is not used in the rust code.`);else{let n=A(s[t]());e[r].version!=n&&console.error(`Plugin ${e[r].name} version mismatch, js version: ${e[r].version}, crate version: ${n}`)}}}function L(e){let r=WebAssembly.Module.imports(e);for(const e in r)null==_.env[r[e].name]&&(console.warn(`No ${r[e].name} function in gl.js`),_.env[r[e].name]=function(){console.warn(`Missed function: ${r[e].name}`)})}return{load:function(e){let r=fetch(e);!function(e){if(null!=e)for(let r=0;r<e.length;r++)null!=e[r].register_plugin&&null!=e[r].register_plugin&&e[r].register_plugin(_)}(a),"function"==typeof WebAssembly.compileStreaming?WebAssembly.compileStreaming(r).then((e=>(L(e),WebAssembly.instantiate(e,_)))).then((e=>{t=e.exports.memory,s=e.exports;let r=A(s.crate_version());GLoader.gljs_version!=r&&console.error(`Version mismatch: gl.js version is: ${GLoader.version}, rust sapp-wasm crate version is: ${r}`),x(a),e.exports.main()})).catch((e=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(e)})):r.then((e=>e.arrayBuffer())).then((e=>WebAssembly.compile(e))).then((function(e){return L(e),WebAssembly.instantiate(e,_)})).then((function(e){t=e.exports.memory,s=e.exports;let r=A(s.crate_version());GLoader.version!=r&&console.error(`Version mismatch: gl.js version is: ${GLoader.version}, rust sapp-wasm crate version is: ${r}`),x(a),e.exports.main()})).catch((e=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(e)}))},miniquad_add_plugin:function(e){a.push(e)}}};
